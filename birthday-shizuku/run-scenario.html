<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ è’¼å‡ªã—ãšã ç”Ÿèª•ç¥­ è‡ªå‹•åŒ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', 'Hiragino Sans', 'Meiryo', sans-serif;
            padding: 2rem;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .emoji {
            font-size: 4rem;
            margin: 1rem 0;
        }

        .instructions {
            text-align: left;
            background: #f5f5f5;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
            line-height: 1.8;
        }

        .instructions h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .instructions ol {
            margin-left: 1.5rem;
        }

        .instructions li {
            margin: 0.5rem 0;
        }

        .btn-container {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .btn-run {
            background: linear-gradient(45deg, #ff6b9d, #ff8fab);
        }

        .btn-run:hover {
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.6);
        }

        .console {
            background: #1e1e1e;
            color: #00ff00;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .console.active {
            display: block;
        }

        .console p {
            margin: 0.3rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="emoji">ğŸ‰</div>
        <h1>è’¼å‡ªã—ãšã ç”Ÿèª•ç¥­ è‡ªå‹•åŒ–</h1>
        <div class="emoji">âœ¨</div>

        <div class="instructions">
            <h3>ğŸ“ ä½¿ã„æ–¹</h3>
            <ol>
                <li><strong>Win + G</strong> ã§ç”»é¢éŒ²ç”»ã‚’é–‹å§‹</li>
                <li><strong>F12</strong> ã‚’æŠ¼ã—ã¦DevToolsã‚’é–‹ã</li>
                <li><strong>Console</strong> ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ</li>
                <li>ä¸‹ã®ã€Œã‚·ãƒŠãƒªã‚ªè¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã§ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª</li>
                <li>ã€Œè‡ªå‹•å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã§é–‹å§‹</li>
            </ol>
        </div>

        <div class="btn-container">
            <button class="btn" onclick="showScenario()">ğŸ“‹ ã‚·ãƒŠãƒªã‚ªè¡¨ç¤º</button>
            <button class="btn btn-run" onclick="runScenario()">â–¶ï¸ è‡ªå‹•å®Ÿè¡Œ</button>
            <button class="btn" onclick="runImprovedVersion()" style="background: linear-gradient(45deg, #28a745, #20c997);">ğŸ”§ æ”¹å–„ç‰ˆå®Ÿè¡Œ</button>
        </div>

        <div class="console" id="console"></div>
    </div>

    <script src="birthday-scenario.js"></script>
    <script>
        const consoleEl = document.getElementById('console');

        function showScenario() {
            consoleEl.classList.add('active');
            consoleEl.innerHTML = '<p style="color: #00ffff;">ğŸ¬ è’¼å‡ªã—ãšãç”Ÿèª•ç¥­ã‚·ãƒŠãƒªã‚ª</p>';
            consoleEl.innerHTML += '<p style="color: #ffffff;">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</p>';
            
            scenario.steps.forEach(step => {
                consoleEl.innerHTML += `<p style="color: #ffff00;">ğŸ“Œ Step ${step.step}: ${step.description}</p>`;
                consoleEl.innerHTML += `<p style="color: #aaaaaa;">   Action: ${step.action}</p>`;
                if (step.url) {
                    consoleEl.innerHTML += `<p style="color: #aaaaaa;">   URL: ${step.url}</p>`;
                }
                consoleEl.innerHTML += '<br>';
            });
            
            consoleEl.innerHTML += '<p style="color: #00ff00;">âœ… å…¨18ã‚¹ãƒ†ãƒƒãƒ—æº–å‚™å®Œäº†ï¼</p>';
        }

        async function runScenario() {
            const confirmed = confirm('ğŸ¬ è‡ªå‹•åŒ–ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ\n\nç”»é¢éŒ²ç”»ãŒé–‹å§‹ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼');
            if (!confirmed) return;

            consoleEl.classList.add('active');
            consoleEl.innerHTML = '<p style="color: #00ffff;">ğŸ¬ å®Ÿè¡Œé–‹å§‹...</p>';

            // 3ç§’ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
            for (let i = 3; i > 0; i--) {
                consoleEl.innerHTML += `<p style="color: #ffff00;">${i}...</p>`;
                await sleep(1000);
            }

            // ã‚·ãƒŠãƒªã‚ªå®Ÿè¡Œ
            for (const step of scenario.steps) {
                consoleEl.innerHTML += `<p style="color: #00ff00;">ğŸ“Œ Step ${step.step}: ${step.description}</p>`;
                
                try {
                    await executeStep(step);
                    consoleEl.innerHTML += `<p style="color: #aaaaaa;">   âœ… å®Œäº†</p>`;
                } catch (error) {
                    consoleEl.innerHTML += `<p style="color: #ff0000;">   âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</p>`;
                }
                
                consoleEl.scrollTop = consoleEl.scrollHeight;
            }

            consoleEl.innerHTML += '<p style="color: #00ff00;">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</p>';
            consoleEl.innerHTML += '<p style="color: #00ffff;">âœ… ã™ã¹ã¦å®Œäº†ï¼éŒ²ç”»ã‚’åœæ­¢ã—ã¦ãã ã•ã„ï¼</p>';
        }

        async function executeStep(step) {
            switch (step.action) {
                case 'navigate':
                    window.location.href = step.url;
                    await sleep(step.wait || 2000);
                    break;

                case 'click':
                    const clickEl = document.querySelector(step.selector);
                    if (clickEl) clickEl.click();
                    await sleep(step.wait || 1000);
                    break;

                case 'typeSlowly':
                    const inputEl = document.querySelector(step.selector);
                    if (inputEl) {
                        inputEl.focus();
                        for (const char of step.text) {
                            inputEl.value += char;
                            inputEl.dispatchEvent(new Event('input', { bubbles: true }));
                            await sleep(step.speed || 200);
                        }
                    }
                    break;

                case 'press':
                    const event = new KeyboardEvent('keydown', { 
                        key: step.key, 
                        code: step.key,
                        keyCode: step.key === 'Enter' ? 13 : 0,
                        bubbles: true 
                    });
                    document.activeElement.dispatchEvent(event);
                    await sleep(step.wait || 1000);
                    break;

                case 'scroll':
                    window.scrollTo({ 
                        top: step.direction === 'down' ? step.amount : -step.amount, 
                        behavior: 'smooth' 
                    });
                    await sleep(step.duration || 2000);
                    break;

                case 'wait':
                    await sleep(step.duration || 1000);
                    break;

                case 'typeInNewTab':
                    window.location.href = step.url;
                    await sleep(500);
                    document.body.innerHTML = step.htmlContent;
                    await sleep(step.wait || 5000);
                    break;
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // æ”¹å–„ç‰ˆå®Ÿè¡Œé–¢æ•°
        async function runImprovedVersion() {
            const confirmed = confirm('ğŸ”§ æ”¹å–„ç‰ˆè‡ªå‹•åŒ–ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ\n\nâœ… Twitterãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®è‡ªå‹•ç¢ºèª\nâœ… ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®å¼·åŒ–\nâœ… ã‚ˆã‚Šå®‰å…¨ãªå®Ÿè¡Œ\n\nç”»é¢éŒ²ç”»ãŒé–‹å§‹ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼');
            if (!confirmed) return;

            consoleEl.classList.add('active');
            consoleEl.innerHTML = '<p style="color: #00ffff;">ğŸ”§ æ”¹å–„ç‰ˆè‡ªå‹•åŒ–é–‹å§‹...</p>';
            consoleEl.innerHTML += '<p style="color: #ffffff;">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</p>';
            
            // æ”¹å–„ç‰ˆã®ç‰¹å¾´ã‚’è¡¨ç¤º
            consoleEl.innerHTML += '<p style="color: #00ff00;">âœ¨ æ”¹å–„ç‰ˆã®ç‰¹å¾´:</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   ğŸ” Twitterãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®è‡ªå‹•ç¢ºèª</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   ğŸ›¡ï¸ å¼·åŒ–ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼å‡¦ç†</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   ğŸ”„ å¤±æ•—æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   â° ãƒ­ã‚°ã‚¤ãƒ³å¾…æ©Ÿæ©Ÿèƒ½</p>';
            consoleEl.innerHTML += '<br>';
            
            consoleEl.innerHTML += '<p style="color: #ffff00;">ğŸ“‹ å®Ÿè¡Œæ–¹æ³•:</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   1. ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é–‹ã</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   2. birthday-shizukuãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   3. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ:</p>';
            consoleEl.innerHTML += '<p style="color: #00ff00;">   node birthday-automation-improved.js</p>';
            consoleEl.innerHTML += '<br>';
            
            consoleEl.innerHTML += '<p style="color: #ffff00;">ã¾ãŸã¯:</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   step2-auto-run-improved.bat ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</p>';
            consoleEl.innerHTML += '<br>';
            
            consoleEl.innerHTML += '<p style="color: #ff6b9d;">ğŸ’¡ æ”¹å–„ç‰ˆã§ã¯ä»¥ä¸‹ã®å•é¡ŒãŒè§£æ±ºã•ã‚Œã¦ã„ã¾ã™:</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   âŒ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã§ã®åœæ­¢ â†’ âœ… è‡ªå‹•æ¤œå‡ºï¼†å¾…æ©Ÿ</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   âŒ ã‚¨ãƒ©ãƒ¼æ™‚ã®åœæ­¢ â†’ âœ… å®‰å…¨ãªã‚¹ã‚­ãƒƒãƒ—</p>';
            consoleEl.innerHTML += '<p style="color: #aaaaaa;">   âŒ ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ â†’ âœ… è©³ç´°ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</p>';
            
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }
    </script>
</body>
</html>
