# 色のコントラストガイドライン

## 📋 目的

このドキュメントは、KimiLink Voiceプロジェクトにおいて、**テキストや重要な要素が背景に埋もれて見えなくなる問題**を防ぐためのガイドラインです。

---

## ⚠️ 絶対に守るべきルール

### 1. **最小コントラスト比**

- **通常テキスト（18px未満）**: コントラスト比 **4.5:1** 以上
- **大きいテキスト（18px以上 または 14px太字以上）**: コントラスト比 **3:1** 以上
- **UI要素（ボタン、アイコン）**: コントラスト比 **3:1** 以上

### 2. **推奨テキスト色**

#### 白い背景（#FFFFFF）の場合
```css
/* ✅ 良い例 */
color: #1a1a1a;  /* メインテキスト - コントラスト比 16.7:1 */
color: #333333;  /* セカンダリテキスト - コントラスト比 12.6:1 */
color: #555555;  /* サブテキスト - コントラスト比 8.0:1 */

/* ❌ 悪い例 */
color: #999999;  /* 薄すぎる - コントラスト比 2.8:1 */
color: #cccccc;  /* 見えない - コントラスト比 1.6:1 */
```

#### 暗い背景（#0a0e27）の場合
```css
/* ✅ 良い例 */
color: #FFFFFF;  /* メインテキスト */
color: #E0E0E0;  /* セカンダリテキスト */
color: #B0B0B0;  /* サブテキスト */

/* ❌ 悪い例 */
color: #666666;  /* 見えにくい */
color: #444444;  /* 見えない */
```

### 3. **グラデーション背景での注意**

グラデーション背景を使用する場合：

```css
/* ✅ 良い例 - テキストに影をつける */
.text-on-gradient {
    color: #FFFFFF;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* ✅ 良い例 - 半透明の背景を敷く */
.text-on-gradient {
    color: #1a1a1a;
    background: rgba(255, 255, 255, 0.9);
    padding: 8px 12px;
    border-radius: 8px;
}
```

---

## 🔍 チェックリスト

### 新しいページを作成する時

- [ ] すべてのテキストが読みやすいか確認
- [ ] ボタンやリンクのテキストが見えるか確認
- [ ] アイコンが背景に埋もれていないか確認
- [ ] ホバー時の色も確認
- [ ] スマホ・タブレット・PCすべてで確認
- [ ] ライトモード・ダークモードで確認（将来対応時）

### CSSを変更する時

- [ ] 変更した要素の周辺要素への影響を確認
- [ ] 親要素の背景色を考慮
- [ ] 子要素のテキスト色を確認
- [ ] コントラスト比を計算（ツール使用推奨）

---

## 🛠️ コントラスト比チェックツール

### オンラインツール

1. **WebAIM Contrast Checker**
   - https://webaim.org/resources/contrastchecker/
   - 使い方：背景色とテキスト色を入力 → 自動判定

2. **Colorable**
   - https://colorable.jxnblk.com/
   - 使い方：複数の色の組み合わせを一覧表示

3. **Chrome DevTools**
   - 要素を選択 → Styles パネル → 色の横に表示される警告マーク

---

## 📊 KimiLink Voiceで使用する色パレット

### メインカラー

```css
/* プライマリカラー */
--primary-blue: #4FC3F7;        /* 明るい青 */
--primary-blue-dark: #26C6DA;   /* 濃い青 */
--primary-purple: #667eea;      /* 紫 */

/* テキストカラー */
--text-primary: #1a1a1a;        /* メインテキスト（白背景用） */
--text-secondary: #333333;      /* セカンダリテキスト（白背景用） */
--text-tertiary: #555555;       /* サブテキスト（白背景用） */
--text-light: #FFFFFF;          /* ライトテキスト（暗い背景用） */
--text-light-secondary: #E0E0E0; /* セカンダリライト（暗い背景用） */

/* 背景カラー */
--bg-dark: #0a0e27;             /* ダークモード背景 */
--bg-light: #FFFFFF;            /* ライトモード背景 */
--bg-card: #FFFFFF;             /* カード背景 */
```

### 推奨される組み合わせ

| 背景色 | テキスト色 | コントラスト比 | 判定 |
|--------|-----------|---------------|------|
| `#FFFFFF` | `#1a1a1a` | 16.7:1 | ✅ AAA |
| `#FFFFFF` | `#333333` | 12.6:1 | ✅ AAA |
| `#FFFFFF` | `#555555` | 8.0:1  | ✅ AAA |
| `#0a0e27` | `#FFFFFF` | 15.3:1 | ✅ AAA |
| `#4FC3F7` | `#FFFFFF` | 3.2:1  | ✅ AA（大きいテキストのみ） |

---

## ❌ 絶対に避けるべき組み合わせ

```css
/* ❌ 白い背景に薄いグレー */
background: #FFFFFF;
color: #999999; /* コントラスト比 2.8:1 - NG */

/* ❌ グレーの背景にグレーのテキスト */
background: #F5F5F5;
color: #CCCCCC; /* コントラスト比 1.5:1 - NG */

/* ❌ 暗い背景に暗いテキスト */
background: #0a0e27;
color: #333333; /* ほとんど見えない - NG */

/* ❌ 明るい青の背景に白いテキスト（小さい場合） */
background: #4FC3F7;
color: #FFFFFF;
font-size: 12px; /* コントラスト比 3.2:1 - 小さいテキストではNG */
```

---

## 🎨 プロフィールページの色設定（正解例）

### 統計情報

```css
.stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1a1a1a;  /* ✅ 濃い黒 */
}

.stat-label {
    font-size: 0.85rem;
    color: #333333;   /* ✅ 濃いグレー（#666はNG） */
    font-weight: 600; /* ✅ 太字で視認性向上 */
}
```

### ボタン

```css
.btn-request-large {
    background: linear-gradient(135deg, #4FC3F7 0%, #26C6DA 100%);
    color: #FFFFFF;   /* ✅ 白文字 */
    font-weight: 600; /* ✅ 太字 */
}
```

---

## 🚨 過去に発生した問題と修正

### 問題1: フォロワー数のラベルが見えない

**症状**: プロフィールページのフォロワー数ラベルが薄すぎて見えない

**原因**: 
```css
.stat-label {
    color: #666; /* 薄すぎる */
}
```

**修正**:
```css
.stat-label {
    color: #333;       /* 濃いグレーに変更 */
    font-weight: 600;  /* 太字にして強調 */
}
```

**修正日**: 2025-11-22

---

## 📝 変更履歴

### v1.0 - 2025-11-22
- 初版作成
- プロフィールページの統計ラベル色を修正（#666 → #333）
- コントラスト比ガイドライン追加
- チェックリスト追加

---

## 🔗 参考資料

- [WCAG 2.1 - Contrast (Minimum)](https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html)
- [WebAIM: Contrast and Color Accessibility](https://webaim.org/articles/contrast/)
- [Material Design - Color System](https://m3.material.io/styles/color/system/overview)

---

## 💡 覚えておくべきポイント

1. **#666は危険**：白い背景では使えるが、他の背景では見えなくなる可能性が高い
2. **#333が安全**：ほとんどの白い背景で問題なく見える
3. **#1a1a1aが最適**：最も濃い黒で、あらゆる場面で視認性が高い
4. **太字を活用**：`font-weight: 600`以上で視認性が大幅に向上
5. **テキストシャドウ**：グラデーション背景では `text-shadow` を使用
6. **実機確認必須**：デザインツールだけでなく、実際のブラウザで確認

---

**このガイドラインを守れば、テキストや要素が見えなくなる問題は発生しません！**
