<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{name}} - KimiLink Voice</title>
    <meta name="description" content="{{description}}">
    
    <!-- DNS Prefetch & Preconnect -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="/css/request-modal.css">
</head>
<body>
    <!-- ÂÆáÂÆôËÉåÊôØ„Ç®„Éï„Çß„ÇØ„Éà -->
    <div id="star-field"></div>
    <div class="galaxy-fog"></div>
    <div class="aurora"></div>

    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <header class="public-header">
        <div class="header-container">
            <div class="logo-area" onclick="location.href='/'">
                <img src="/images/logo/RGB/ÈÄèÈÅé/logo_funlink_RGB_ginga_color.png" alt="KimiLink Voice" class="header-logo">
                <span class="logo-text">KimiLink Voice</span>
            </div>
            
            <nav class="header-nav">
                <a href="/">„Éõ„Éº„É†</a>
                <a href="/narrators/">Â£∞ÂÑ™‰∏ÄË¶ß</a>
                <a href="/thanks/">ÊÑüË¨ù„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏</a>
            </nav>

            <button type="button" class="btn-login" onclick="location.href='/dashboard/'">
                <i class="fas fa-tachometer-alt"></i> „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
            </button>
        </div>
    </header>

    <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <main class="profile-main">
        <div class="container">
            <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Éò„ÉÉ„ÉÄ„Éº -->
            <div class="profile-header">
                <div class="profile-cover" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <img src="/images/logo/RGB/ÈÄèÈÅé/logo_funlink_RGB_ginga_color.png" alt="KimiLink Voice" class="cover-logo">
                </div>
                
                <div class="profile-info">
                    <div class="profile-avatar-wrapper">
                        <img src="{{profile_image_url}}" alt="{{name}}" class="profile-avatar" width="120" height="120" loading="eager" decoding="sync">
                        <div class="rank-badge badge-{{rank}}">{{rankLabel}}</div>
                    </div>
                    
                    <div class="profile-details">
                        <h1 class="profile-name">{{name}}</h1>
                        <p class="profile-handle">@{{username}}</p>
                        
                        <div class="profile-stats">
                            <div class="stat-item">
                                <i class="fas fa-users"></i>
                                <span class="stat-number">{{followers_count}}</span>
                                <span class="stat-label">„Éï„Ç©„É≠„ÉØ„Éº</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-check-circle"></i>
                                <span class="stat-number">{{achievement_count}}</span>
                                <span class="stat-label">ÂÆüÁ∏æ</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span class="stat-number">{{engagement_count}}</span>
                                <span class="stat-label">„Ç®„É≥„Ç≤„Éº„Ç∏„É°„É≥„Éà</span>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button class="btn-request-large" onclick="openRequestModal()">
                                <i class="fas fa-paper-plane"></i> ‰æùÈ†º„Åô„Çã
                            </button>
                            <a href="https://twitter.com/{{username}}" class="btn-follow-large">
                                <i class="fab fa-twitter"></i> „Éï„Ç©„É≠„Éº
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- „Éó„É≠„Éï„Ç£„Éº„É´Êú¨Êñá -->
            <div class="profile-content">
                <!-- Â∑¶„Ç´„É©„É† -->
                <div class="profile-left">
                    <!-- Ëá™Â∑±Á¥π‰ªã -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-user-circle"></i> Ëá™Â∑±Á¥π‰ªã
                        </h2>
                        <p class="profile-bio">{{description}}</p>
                    </section>

                    <!-- ÊñôÈáëË°® -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-tag"></i> ÊñôÈáë
                        </h2>
                        <div class="pricing-card">
                            <div class="pricing-item">
                                <span class="pricing-label">Âü∫Êú¨ÊñôÈáë</span>
                                <span class="pricing-value">¬•{{price_per_char}}/ÊñáÂ≠ó</span>
                            </div>
                            <div class="pricing-item">
                                <span class="pricing-label">ÊúÄ‰ΩéÊñôÈáë</span>
                                <span class="pricing-value">¬•{{min_price}}</span>
                            </div>
                            <div class="pricing-note">
                                <i class="fas fa-info-circle"></i>
                                ÊñáÂ≠óÊï∞„Å´Âøú„Åò„Å¶Ëá™ÂãïË®àÁÆó„Åï„Çå„Åæ„Åô
                            </div>
                        </div>
                    </section>

                    <!-- ÂæóÊÑè„Ç∏„É£„É≥„É´ -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-tags"></i> ÂæóÊÑè„Ç∏„É£„É≥„É´
                        </h2>
                        <div class="tag-list">
                            {{tags}}
                        </div>
                    </section>

                    <!-- „Çµ„É≥„Éó„É´„Éú„Ç§„Çπ -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-headphones"></i> „Çµ„É≥„Éó„É´„Éú„Ç§„Çπ
                        </h2>
                        <div class="sample-voice-list">
                            <div class="sample-voice-item">
                                <div class="sample-info">
                                    <i class="fas fa-microphone"></i>
                                    <span>Ëá™Â∑±Á¥π‰ªã</span>
                                </div>
                                <audio controls class="sample-audio">
                                    <source src="/uploads/samples/{{username}}/intro.mp3" type="audio/mpeg">
                                </audio>
                            </div>
                            <div class="sample-voice-item">
                                <div class="sample-info">
                                    <i class="fas fa-microphone"></i>
                                    <span>„Éù„Éº„Éà„Éï„Ç©„É™„Ç™1</span>
                                </div>
                                <audio controls class="sample-audio">
                                    <source src="/uploads/samples/{{username}}/portfolio1.mp3" type="audio/mpeg">
                                </audio>
                            </div>
                            <div class="sample-voice-item">
                                <div class="sample-info">
                                    <i class="fas fa-microphone"></i>
                                    <span>„Éù„Éº„Éà„Éï„Ç©„É™„Ç™2</span>
                                </div>
                                <audio controls class="sample-audio">
                                    <source src="/uploads/samples/{{username}}/portfolio2.mp3" type="audio/mpeg">
                                </audio>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Âè≥„Ç´„É©„É† -->
                <div class="profile-right">
                    <!-- ÂÆüÁ∏æ -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-trophy"></i> ÂÆüÁ∏æ
                        </h2>
                        <div class="achievement-stats">
                            <div class="achievement-item">
                                <i class="fas fa-check-circle"></i>
                                <span>ÂÆå‰∫ÜÊ°à‰ª∂: <strong>{{achievement_count}}‰ª∂</strong></span>
                            </div>
                            <div class="achievement-item">
                                <i class="fas fa-redo"></i>
                                <span>„É™„Éî„Éº„ÉàÁéá: <strong>85%</strong></span>
                            </div>
                        </div>
                    </section>

                    <!-- ÂØæÂøúÊôÇÈñì -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-clock"></i> ÂØæÂøúÊôÇÈñì
                        </h2>
                        <div class="response-info">
                            <div class="info-item">
                                <span class="info-label">Âπ≥ÂùáËøî‰ø°ÊôÇÈñì</span>
                                <span class="info-value">2ÊôÇÈñì‰ª•ÂÜÖ</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Âπ≥ÂùáÁ¥çÊúü</span>
                                <span class="info-value">3Êó•</span>
                            </div>
                        </div>
                    </section>

                    <!-- ÊÑüË¨ù„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏ -->
                    <section class="profile-section">
                        <h2 class="section-title">
                            <i class="fas fa-heart"></i> ÊÑüË¨ù„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏
                        </h2>
                        <div class="thanks-preview">
                            <p class="thanks-note">„Åæ„Å†„É°„ÉÉ„Çª„Éº„Ç∏„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                            <a href="/{{username}}/thanks/" class="btn-view-thanks">
                                „Åô„Åπ„Å¶Ë¶ã„Çã <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- „Éï„ÉÉ„Çø„Éº -->
    <footer class="public-footer">
        <div class="footer-container">
            <p>&copy; 2024 KimiLink Voice. All rights reserved.</p>
        </div>
    </footer>

    <!-- ‰æùÈ†º„É¢„Éº„ÉÄ„É´ -->
    <div id="requestModal" class="request-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-paper-plane"></i> 
                    <span id="modalNarratorName">{{name}}</span>„Å´‰æùÈ†º„Åô„Çã
                </h2>
                <button class="modal-close" onclick="closeRequestModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <!-- ‰æùÈ†ºËÄÖÊÉÖÂ†± -->
                <div class="request-section">
                    <h3><i class="fas fa-user"></i> ‰æùÈ†ºËÄÖÊÉÖÂ†±</h3>
                    
                    <!-- Twitter„Ç¢„Ç´„Ç¶„É≥„ÉàÊÉÖÂ†±ÔºàËá™ÂãïË°®Á§∫Ôºâ -->
                    <div class="twitter-account-info" id="twitterAccountInfo" style="display: none;">
                        <div class="account-card">
                            <img src="" alt="„Ç¢„Éê„Çø„Éº" class="account-avatar" id="requesterAvatar">
                            <div class="account-details">
                                <div class="account-name" id="requesterDisplayName">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                                <div class="account-handle" id="requesterTwitterHandle">@...</div>
                            </div>
                        </div>
                        <p class="account-note">
                            <i class="fas fa-info-circle"></i>
                            Twitter„Ç¢„Ç´„Ç¶„É≥„Éà„Åß‰æùÈ†º„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆ„Ç¢„Ç´„Ç¶„É≥„Éà„ÅßÂ£∞ÂÑ™„Åï„Çì„Å®„ÇÑ„Çä„Å®„Çä„Åó„Åæ„Åô„ÄÇ
                        </p>
                    </div>
                    
                    <!-- „É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà -->
                    <div class="login-required" id="loginRequired">
                        <div class="login-prompt">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>‰æùÈ†º„Åô„Çã„Å´„ÅØTwitter„Ç¢„Ç´„Ç¶„É≥„Éà„Åß„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô</p>
                            <button class="btn-login-prompt" onclick="location.href='/auth/twitter'">
                                <i class="fab fa-twitter"></i> Twitter„Åß„É≠„Ç∞„Ç§„É≥
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>ÈÄ£Áµ°Áî®„É°„Éº„É´„Ç¢„Éâ„É¨„ÇπÔºà‰ªªÊÑèÔºâ</label>
                        <input type="email" id="requesterEmail" placeholder="example@example.com">
                        <small>ÈÄöÁü•„ÇíÂèó„ÅëÂèñ„Çä„Åü„ÅÑÂ†¥Âêà„ÅØ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</small>
                    </div>
                </div>

                <!-- „Çπ„ÇØ„É™„Éó„ÉàÂÖ•Âäõ -->
                <div class="request-section">
                    <h3><i class="fas fa-file-alt"></i> ‰æùÈ†ºÂÜÖÂÆπ</h3>
                    <div class="form-group">
                        <label>„Çπ„ÇØ„É™„Éó„Éà <span class="required">*</span></label>
                        <div class="ai-assist-buttons">
                            <button type="button" class="btn-ai-assist" onclick="generateCheerPattern()">
                                <i class="fas fa-magic"></i> ÂøúÊè¥„Éú„Ç§„Çπ„ÅÆ„Éë„Çø„Éº„É≥„ÇíÊèêÊ°à
                            </button>
                            <button type="button" class="btn-ai-assist" onclick="expandScriptIdea()">
                                <i class="fas fa-lightbulb"></i> Âè∞Êú¨„ÅÆ„Ç§„É°„Éº„Ç∏„ÇíËÜ®„Çâ„Åæ„Åõ„Çã
                            </button>
                        </div>
                        <textarea 
                            id="requestScript" 
                            placeholder="Ë™≠„Åø‰∏ä„Åí„Å¶„Åª„Åó„ÅÑ„Çπ„ÇØ„É™„Éó„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ&#10;&#10;üí° „Åµ„Çè„Å£„Å®„Åó„Åü„Ç§„É°„Éº„Ç∏„Åß„ÇÇOKÔºÅ&#10;‰æãÔºö„ÄåÈ†ëÂºµ„Å£„Å¶„ÇãÈÖç‰ø°ËÄÖ„ÇíÂøúÊè¥„Åó„Åü„ÅÑ„Äç&#10;‚Üí AI„ÅåÂÖ∑‰ΩìÁöÑ„Å™„Çπ„ÇØ„É™„Éó„Éà„ÇíÊèêÊ°à„Åó„Åæ„Åô&#10;&#10;„Åæ„Åü„ÅØÂÖ∑‰ΩìÁöÑ„Å™„Çπ„ÇØ„É™„Éó„ÉàÔºö&#10;„Äå„Åì„Çì„Å´„Å°„ÅØÔºÅ‰ªäÊó•„ÇÇÈÖç‰ø°„ÅäÁñ≤„ÇåÊßòÔºÅ&#10;„ÅÑ„Å§„ÇÇÊ•Ω„Åó„ÅÑÈÖç‰ø°„Çí„ÅÇ„Çä„Åå„Å®„ÅÜÔºÅ„Äç"
                            rows="10"
                            oninput="calculatePrice()"
                            required
                        ></textarea>
                        <div class="char-count">
                            <span id="charCount">0</span> ÊñáÂ≠ó
                        </div>
                        <div id="aiSuggestion" class="ai-suggestion" style="display: none;">
                            <div class="suggestion-header">
                                <i class="fas fa-robot"></i> AIÊèêÊ°à
                                <button type="button" class="btn-use-suggestion" onclick="useSuggestion()">
                                    <i class="fas fa-check"></i> „Åì„ÅÆÊèêÊ°à„Çí‰Ωø„ÅÜ
                                </button>
                            </div>
                            <div class="suggestion-content" id="suggestionContent"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Áî®ÈÄî„ÉªÁõÆÁöÑ</label>
                        <select id="requestPurpose">
                            <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <option value="youtube">YouTubeÂãïÁîª</option>
                            <option value="commercial">CM„ÉªÂ∫ÉÂëä</option>
                            <option value="game">„Ç≤„Éº„É†</option>
                            <option value="anime">„Ç¢„Éã„É°</option>
                            <option value="stream">ÈÖç‰ø°</option>
                            <option value="other">„Åù„ÅÆ‰ªñ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Â∏åÊúõÁ¥çÊúü</label>
                        <input type="date" id="requestDeadline">
                    </div>
                    
                    <div class="form-group">
                        <label>ÂÇôËÄÉ„ÉªÁâπË®ò‰∫ãÈ†Ö</label>
                        <textarea 
                            id="requestNotes" 
                            placeholder="„Ç§„É°„Éº„Ç∏„ÄÅ„Éà„Éº„É≥„ÄÅ„Åù„ÅÆ‰ªñ„ÅîË¶ÅÊúõ„Åå„ÅÇ„Çå„Å∞„ÅîË®òÂÖ•„Åè„Å†„Åï„ÅÑ"
                            rows="3"
                        ></textarea>
                    </div>
                </div>

                <!-- ÊñôÈáëË®àÁÆó -->
                <div class="request-section price-section">
                    <h3><i class="fas fa-yen-sign"></i> ÊñôÈáë</h3>
                    <div class="price-detail">
                        <div class="price-row">
                            <span>ÊñáÂ≠óÊï∞</span>
                            <span><strong id="priceCharCount">0</strong> ÊñáÂ≠ó</span>
                        </div>
                        <div class="price-row">
                            <span>Âçò‰æ°</span>
                            <span>¬•<span id="pricePerChar">{{price_per_char}}</span> / ÊñáÂ≠ó</span>
                        </div>
                        <div class="price-row">
                            <span>Â∞èË®à</span>
                            <span>¬•<span id="priceSubtotal">0</span></span>
                        </div>
                        <div class="price-row minimum-price" id="minimumPriceRow" style="display: none;">
                            <span>ÊúÄ‰ΩéÊñôÈáëÈÅ©Áî®</span>
                            <span>¬•<span id="minimumPrice">{{min_price}}</span></span>
                        </div>
                        <div class="price-divider"></div>
                        <div class="price-row price-total">
                            <span>ÂêàË®àÈáëÈ°ç</span>
                            <span>¬•<span id="priceTotal">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeRequestModal()">
                    „Ç≠„É£„É≥„Çª„É´
                </button>
                <button class="btn-submit" onclick="submitRequest()">
                    <i class="fas fa-paper-plane"></i> ‰æùÈ†º„ÇíÈÄÅ‰ø°
                </button>
            </div>
        </div>
    </div>

    <!-- „Çπ„ÇØ„É™„Éó„Éà -->
    <script src="/js/script.js"></script>
    <script src="/js/request-modal.js"></script>
</body>
</html>
