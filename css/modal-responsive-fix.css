/* ===================================================
   モーダルのレスポンシブデザイン改善（全キャリア対応）
   
   - スクロールバーなし
   - ×ボタン常に表示
   - あらゆるデバイスで美しく表示
   =================================================== */

/* ===== 折りたたみスマホ対応 (280px以下) ===== */
/* Galaxy Fold 5 (280x653), Galaxy Z Fold など */
@media (max-width: 280px) {
    .modal-content {
        padding: 25px 12px 18px 12px !important;
        max-height: 82vh !important;
        padding-bottom: 25px !important;
    }
    
    .logo-modal {
        width: 150px !important;
        margin-bottom: 5px !important;
    }
    
    .logo-section p {
        display: none !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 10px auto !important;
        max-width: 200px !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 40px !important;
        height: 40px !important;
        max-width: 40px !important;
        max-height: 40px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 55px !important;
        height: 55px !important;
        max-width: 55px !important;
        max-height: 55px !important;
    }
    
    .step-number {
        width: 30px !important;
        height: 30px !important;
        font-size: 16px !important;
    }
    
    .btn-login {
        padding: 10px 18px !important;
        font-size: 13px !important;
    }
    
    .account-item {
        padding: 10px !important;
    }
    
    .account-avatar {
        width: 32px !important;
        height: 32px !important;
    }
    
    .account-name {
        font-size: 12px !important;
    }
    
    .account-username {
        font-size: 11px !important;
    }
    
    .login-info-box {
        padding: 12px !important;
        margin: 12px 0 !important;
    }
    
    .info-icon {
        font-size: 32px !important;
    }
    
    .info-title {
        font-size: 13px !important;
    }
    
    .info-text {
        font-size: 11px !important;
    }
    
    .link-x {
        padding: 6px 12px !important;
        font-size: 12px !important;
    }
}

/* ===== 超小型デバイス (281px - 360px) ===== */
/* iPhone SE (375x667), Galaxy S8+ など */
@media (min-width: 281px) and (max-width: 360px) {
    .modal-content {
        padding: 30px 15px 20px 15px !important;
        max-width: 98% !important;
        max-height: 83vh !important;
    }
    
    #loginModal .modal-close,
    #switchAccountModal .modal-close,
    .modal-close {
        width: 36px !important;
        height: 36px !important;
        font-size: 20px !important;
        margin-top: -25px !important;
        margin-right: -8px !important;
    }
    
    .logo-modal {
        width: 170px !important;
    }
    
    .logo-section p {
        display: none !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 12px auto !important;
        max-width: 240px !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 48px !important;
        height: 48px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 62px !important;
        height: 62px !important;
    }
}

/* ===== 小型スマホ (361px - 400px) ===== */
/* iPhone 12 mini (375x812), Pixel 7 (393x851) など */
@media (min-width: 361px) and (max-width: 400px) {
    .modal-content {
        padding: 33px 16px 22px 16px !important;
        max-height: 84vh !important;
    }
    
    .logo-modal {
        width: 175px !important;
    }
    
    .logo-section p {
        display: none !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 14px auto !important;
        max-width: 250px !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 50px !important;
        height: 50px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 64px !important;
        height: 64px !important;
    }
}

/* ===== 標準スマホ (401px - 480px) ===== */
/* iPhone 12 Pro (390x844), iPhone 14 Pro Max (430x932) など */
@media (min-width: 401px) and (max-width: 480px) {
    /* モーダルコンテンツのコンパクト化 */
    .modal-content {
        padding: 35px 18px 20px 18px !important;
        max-height: 85vh !important;
        padding-bottom: 30px !important;
    }
    
    /* ロゴのサイズ調整 */
    .logo-modal {
        width: 180px !important;
        margin-bottom: 8px !important;
    }
    
    /* 「君と繋がる、声で届ける」テキストを非表示 */
    .logo-section p {
        display: none !important;
    }
    
    /* ゆっくりキャラクターをさらに小さく */
    #loginModal .yukkuri-decoration {
        margin: 15px auto !important;
        max-width: 260px !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 50px !important;
        height: 50px !important;
        max-width: 50px !important;
        max-height: 50px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 65px !important;
        height: 65px !important;
        max-width: 65px !important;
        max-height: 65px !important;
    }
    
    /* ステップ番号のサイズ調整 */
    .step-number {
        width: 35px !important;
        height: 35px !important;
        font-size: 18px !important;
    }
    
    /* ログインボタンのサイズ調整 */
    .btn-login {
        padding: 14px 24px !important;
        font-size: 15px !important;
    }
    
    /* 必須アカウントリストのコンパクト化 */
    .required-accounts-list {
        gap: 8px !important;
    }
    
    .account-item {
        padding: 12px !important;
    }
    
    .account-avatar {
        width: 36px !important;
        height: 36px !important;
    }
    
    .account-name {
        font-size: 13px !important;
    }
    
    .account-username {
        font-size: 12px !important;
    }
    
    /* ログイン情報ボックスのコンパクト化 */
    .login-info-box {
        padding: 15px !important;
        margin: 15px 0 !important;
    }
    
    .info-icon {
        font-size: 40px !important;
    }
    
    .info-title {
        font-size: 15px !important;
        margin-bottom: 6px !important;
    }
    
    .info-text {
        font-size: 13px !important;
        line-height: 1.5 !important;
        margin-bottom: 10px !important;
    }
    
    .link-x {
        padding: 8px 16px !important;
        font-size: 14px !important;
    }
    
    .link-x i {
        font-size: 16px !important;
    }
}

/* ===== 小型タブレット (481px - 768px) ===== */
/* iPad Mini (768x1024), Samsung Galaxy S20 Ultra など */
@media (min-width: 481px) and (max-width: 768px) {
    .modal-content {
        padding: 38px 25px 30px 25px !important;
        max-height: 88vh !important;
    }
    
    .logo-modal {
        width: 240px !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 25px auto !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 65px !important;
        height: 65px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 85px !important;
        height: 85px !important;
    }
    
    .step-number {
        width: 40px !important;
        height: 40px !important;
        font-size: 20px !important;
    }
}

/* ===== 標準タブレット (769px - 1024px) ===== */
/* iPad Air (820x1180), iPad Pro (1024x1366) など */
@media (min-width: 769px) and (max-width: 1024px) {
    .modal-content {
        padding: 42px 30px 35px 30px !important;
        max-height: 90vh !important;
    }
    
    .logo-modal {
        width: 260px !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 28px auto !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 70px !important;
        height: 70px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 90px !important;
        height: 90px !important;
    }
}

/* ===== Surface対応 (1025px - 1366px) ===== */
/* Surface Pro 7 (912x1368), Surface Duo (540x720×2) など */
@media (min-width: 1025px) and (max-width: 1366px) {
    .modal-content {
        padding: 45px 35px 40px 35px !important;
        max-height: 92vh !important;
    }
    
    .logo-modal {
        width: 280px !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 30px auto !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 75px !important;
        height: 75px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 95px !important;
        height: 95px !important;
    }
}

/* ===== Asus Zenbook Fold対応 (1367px以上) ===== */
/* Asus Zenbook Fold (2560x1920), 大型ディスプレイなど */
@media (min-width: 1367px) {
    .modal-content {
        padding: 50px 40px 40px 40px !important;
        max-height: 90vh !important;
        max-width: 550px !important;
    }
    
    .logo-modal {
        width: 300px !important;
    }
    
    #loginModal .yukkuri-decoration {
        margin: 35px auto !important;
    }
    
    #loginModal .yukkuri-decoration img {
        width: 80px !important;
        height: 80px !important;
    }
    
    #loginModal .yukkuri-center {
        width: 100px !important;
        height: 100px !important;
    }
}

/* スムーズスクロール */
.modal-content {
    scroll-behavior: smooth !important;
    -webkit-overflow-scrolling: touch !important;
}

/* ×ボタンが確実に最前面に表示されるように */
#loginModal .modal-close,
#switchAccountModal .modal-close,
.modal-close {
    pointer-events: auto !important;
    transform-style: preserve-3d !important;
    will-change: transform !important;
}

/* スクロールインジケーター（下にコンテンツがあることを示す） */
.modal-content::after {
    content: '';
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(to top, rgba(15, 23, 42, 0.85) 0%, transparent 100%);
    pointer-events: none;
    z-index: 10;
    display: block;
}

/* スクロール位置が最下部に達したらインジケーターを非表示 */
.modal-content.scrolled-to-bottom::after {
    display: none;
}

/* スマホではインジケーターを少し小さく */
@media (max-width: 480px) {
    .modal-content::after {
        height: 40px;
    }
}

/* 下矢印アイコンを追加（スクロール促進） */
@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(8px);
    }
}

/* スクロールヒントアイコン（全デバイス対応） */
.scroll-hint {
    position: fixed;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%);
    width: 36px;
    height: 36px;
    background: rgba(79, 172, 254, 0.85);
    border-radius: 50%;
    display: none;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 18px;
    animation: bounce 2s infinite;
    pointer-events: none;
    z-index: 10002;
    opacity: 1;
    box-shadow: 0 4px 16px rgba(79, 172, 254, 0.4);
    transition: opacity 0.3s ease;
}

/* スクロールが始まったらヒントを非表示 */
.modal-content.scrolled .scroll-hint {
    opacity: 0;
}

/* スマホではやや小さく */
@media (max-width: 480px) {
    .scroll-hint {
        width: 32px;
        height: 32px;
        font-size: 16px;
        bottom: 10px;
        margin-top: -40px;
    }
}
